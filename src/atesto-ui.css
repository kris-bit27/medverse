/* MedNexus UI tokens + primitives */
:root {
  /* Core tokens (default = dark) */
  --mn-bg: 222 24% 7%;
  --mn-surface: 222 20% 10%;
  --mn-surface-2: 222 18% 12%;
  --mn-elevated: 222 16% 14%;
  --mn-border: 220 14% 22%;
  --mn-text: 210 40% 98%;
  --mn-muted: 215 18% 68%;
  --mn-accent: 176 56% 45%;
  --mn-accent-2: 198 80% 52%;
  --mn-success: 142 60% 45%;
  --mn-warn: 38 92% 55%;
  --mn-danger: 0 72% 55%;
  --mn-shadow-1: 0 6px 16px rgba(0, 0, 0, 0.28);
  --mn-shadow-2: 0 14px 34px rgba(0, 0, 0, 0.35);
  --mn-radius: 14px;
  --mn-space: 16px;
  --mn-focus: 176 56% 45%;

  /* Map to Tailwind tokens */
  --background: var(--mn-bg);
  --foreground: var(--mn-text);
  --card: var(--mn-surface-2);
  --card-foreground: var(--mn-text);
  --popover: var(--mn-elevated);
  --popover-foreground: var(--mn-text);
  --primary: var(--mn-accent);
  --primary-foreground: 210 40% 98%;
  --secondary: var(--mn-surface-2);
  --secondary-foreground: var(--mn-text);
  --muted: var(--mn-surface-2);
  --muted-foreground: var(--mn-muted);
  --accent: var(--mn-surface-2);
  --accent-foreground: var(--mn-text);
  --destructive: var(--mn-danger);
  --destructive-foreground: 210 40% 98%;
  --border: var(--mn-border);
  --input: var(--mn-border);
  --ring: var(--mn-focus);
}

body[data-theme="light"] {
  --mn-bg: 210 24% 96%;
  --mn-surface: 0 0% 100%;
  --mn-surface-2: 210 18% 95%;
  --mn-elevated: 210 24% 98%;
  --mn-border: 220 14% 82%;
  --mn-text: 222 32% 14%;
  --mn-muted: 220 12% 36%;
  --mn-accent: 176 56% 38%;
  --mn-accent-2: 198 80% 46%;
  --mn-success: 142 60% 40%;
  --mn-warn: 38 92% 50%;
  --mn-danger: 0 72% 50%;
  --mn-shadow-1: 0 6px 16px rgba(15, 23, 42, 0.08);
  --mn-shadow-2: 0 16px 36px rgba(15, 23, 42, 0.12);
  --mn-radius: 14px;
  --mn-space: 16px;
  --mn-focus: 176 56% 38%;
}

/* Light mode readability overrides for common utility text colors */
body[data-theme="light"] .text-slate-300,
body[data-theme="light"] .text-slate-400,
body[data-theme="light"] .text-slate-500 {
  color: hsl(var(--mn-muted)) !important;
}

body[data-theme="light"] .text-slate-600 {
  color: hsl(var(--mn-text)) !important;
}

body[data-theme="light"] .badge-outline,
body[data-theme="light"] .badge-secondary {
  background: hsl(var(--mn-surface-2));
  color: hsl(var(--mn-text));
  border-color: hsl(var(--mn-border));
}

body[data-theme="light"] .badge-secondary:hover {
  background: hsl(var(--mn-surface));
}

/* Logbook badge normalization */
.logbook-badges .atesto-badge {
  background: hsl(var(--mn-surface-2));
  color: hsl(var(--mn-text));
  border: 1px solid hsl(var(--mn-border));
}

/* Calendar readability */
body[data-theme="light"] .rdp .day {
  color: hsl(var(--mn-text));
  opacity: 1;
}

body[data-theme="light"] .rdp .rdp-day,
body[data-theme="light"] .rdp .rdp-day_button {
  color: hsl(var(--mn-text)) !important;
}

body[data-theme="light"] .rdp .head_cell {
  color: hsl(var(--mn-muted));
  font-weight: 600;
}

body[data-theme="light"] .rdp .caption_label {
  color: hsl(var(--mn-text)) !important;
}

body[data-theme="light"] .rdp .day-outside,
body[data-theme="light"] .rdp .day-disabled {
  color: hsl(var(--mn-muted));
  opacity: 0.6;
}

body[data-theme="light"] .rdp .rdp-day_outside,
body[data-theme="light"] .rdp .rdp-day_disabled {
  color: hsl(var(--mn-muted)) !important;
  opacity: 0.5;
}

body[data-theme="light"] .rdp .rdp-button {
  color: hsl(var(--mn-text)) !important;
}

body[data-theme="light"] .rdp .rdp-day_outside .rdp-button,
body[data-theme="light"] .rdp .rdp-day_disabled .rdp-button {
  color: hsl(var(--mn-muted)) !important;
}

body[data-theme="light"] .rdp .day_selected {
  color: hsl(var(--mn-text));
}

body[data-theme="light"] .rdp .day-outside,
body[data-theme="light"] .rdp .day-disabled,
body[data-theme="light"] .rdp .text-muted-foreground {
  color: hsl(var(--mn-muted));
}

/* Light mode: soften outline buttons (avoid dark blocks) */
body[data-theme="light"] .atesto-btn.border,
body[data-theme="light"] .atesto-btn.bg-background {
  background: hsl(var(--mn-surface));
  color: hsl(var(--mn-text));
  border-color: hsl(var(--mn-border));
  box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
}

body[data-theme="light"] .atesto-btn.border:hover,
body[data-theme="light"] .atesto-btn.bg-background:hover {
  background: hsl(var(--mn-surface-2));
}

/* Card titles legibility */
.atesto-card-title {
  color: hsl(var(--mn-text));
}

/* Tabs segmented control (global) */
.atesto-tabs-list {
  background: hsl(var(--mn-surface-2));
  border: 1px solid hsl(var(--mn-border));
  border-radius: 999px;
  padding: 4px;
  gap: 6px;
}

.atesto-tab {
  color: hsl(var(--mn-muted));
}

.atesto-tab[data-state="active"] {
  background: hsl(var(--mn-surface));
  color: hsl(var(--mn-text));
  box-shadow: inset 0 0 0 1px hsl(var(--mn-border));
}

.atesto-tab[data-state="inactive"]:hover {
  background: hsl(var(--mn-elevated) / 0.6);
}

body[data-theme="dark"] {
  --mn-bg: 222 22% 7%;
  --mn-surface: 222 20% 10%;
  --mn-surface-2: 222 18% 12%;
  --mn-elevated: 222 16% 14%;
  --mn-border: 220 14% 22%;
  --mn-text: 210 40% 98%;
  --mn-muted: 215 18% 68%;
  --mn-accent: 176 56% 45%;
  --mn-accent-2: 198 80% 52%;
  --mn-success: 142 60% 45%;
  --mn-warn: 38 92% 55%;
  --mn-danger: 0 72% 55%;
  --mn-shadow-1: 0 6px 16px rgba(0, 0, 0, 0.32);
  --mn-shadow-2: 0 12px 30px rgba(0, 0, 0, 0.35);
  --mn-radius: 14px;
  --mn-space: 16px;
  --mn-focus: 176 56% 45%;
}

/* Shell + layout primitives */
.mn-shell {
  background: hsl(var(--mn-bg));
  color: hsl(var(--mn-text));
}

.mn-sidebar {
  background: hsl(var(--mn-surface));
  border-right: 1px solid hsl(var(--mn-border));
}

.mn-topbar {
  background: hsl(var(--mn-elevated));
  border-bottom: 1px solid hsl(var(--mn-border));
}

.mn-main {
  background: hsl(var(--mn-bg));
}

/* Cards, buttons, inputs, selects */
.atesto-card {
  background: hsl(var(--mn-surface-2));
  border: 1px solid hsl(var(--mn-border));
  border-radius: var(--mn-radius);
  box-shadow: var(--mn-shadow-1);
}

.atesto-card-inner {
  padding: 1.5rem;
}

.atesto-btn {
  border-radius: calc(var(--mn-radius) - 4px);
}

.atesto-btn-ghost {
  border: 1px solid transparent;
}

.atesto-btn-ghost:hover {
  background: hsl(var(--mn-elevated));
  border-color: hsl(var(--mn-border));
}

.atesto-badge {
  border-radius: 999px;
}

.atesto-input,
.atesto-select {
  background: hsl(var(--mn-elevated));
  border-color: hsl(var(--mn-border));
}

.atesto-input:focus,
.atesto-select:focus {
  outline: none;
  box-shadow: 0 0 0 2px hsl(var(--mn-focus) / 0.25);
}

.atesto-progressbar {
  background: hsl(var(--mn-accent) / 0.16);
}

/* Sidebar active state */
.mn-sidebar .is-active {
  background: hsl(var(--mn-accent) / 0.12);
  color: hsl(var(--mn-accent));
  box-shadow: inset 0 0 0 1px hsl(var(--mn-accent) / 0.2);
}

/* Reading layout */
.mn-reading {
  max-width: 1120px;
  margin: 0 auto;
}

.mn-reading .atesto-card {
  background: hsl(var(--mn-surface));
}

.mn-reading .tiptap-rendered-content {
  max-width: 1040px;
  margin: 0 auto;
  line-height: 1.7;
  padding: 0.25rem 0;
}

/* Typography for rendered HTML */
.tiptap-rendered-content h1,
.tiptap-rendered-content h2,
.tiptap-rendered-content h3 {
  color: hsl(var(--mn-text));
  letter-spacing: -0.01em;
}

.tiptap-rendered-content p {
  color: hsl(var(--mn-text));
  margin: 0.9rem 0;
}

.tiptap-rendered-content table {
  border: 1px solid hsl(var(--mn-border));
  background: hsl(var(--mn-surface-2));
}

.tiptap-rendered-content th,
.tiptap-rendered-content td {
  border-color: hsl(var(--mn-border));
}

.callout {
  border-left: 4px solid hsl(var(--mn-accent));
  background: hsl(var(--mn-surface-2));
  padding: 0.75rem 1rem;
  border-radius: 10px;
}

.callout--info {
  border-left-color: hsl(var(--mn-accent-2));
}

.callout--warn {
  border-left-color: hsl(var(--mn-warn));
}

blockquote {
  border-left-color: hsl(var(--mn-accent));
}

.tiptap-rendered-content a {
  color: hsl(var(--mn-accent));
  text-decoration: underline;
  text-decoration-color: hsl(var(--mn-accent) / 0.35);
  text-underline-offset: 3px;
}

.tiptap-rendered-content strong {
  color: hsl(var(--mn-text));
}

.tiptap-rendered-content code {
  background: hsl(var(--mn-elevated));
  color: hsl(var(--mn-text));
  border: 1px solid hsl(var(--mn-border));
}

/* Segmented control tabs */
.mn-segmented {
  background: hsl(var(--mn-surface-2));
  border: 1px solid hsl(var(--mn-border));
  border-radius: 999px;
  padding: 4px;
  gap: 6px;
}

.mn-segmented [data-state="active"] {
  background: hsl(var(--mn-elevated));
  color: hsl(var(--mn-text));
  box-shadow: inset 0 0 0 1px hsl(var(--mn-border));
}

.mn-segmented [data-state="inactive"]:hover {
  background: hsl(var(--mn-elevated) / 0.6);
}
